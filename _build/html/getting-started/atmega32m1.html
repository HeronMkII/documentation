

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The ATMega32M1 Microcontroller &mdash; UTAT Space Systems Documentation 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hello World ATMega32M1" href="hello-world.html" />
    <link rel="prev" title="Software Installation - Linux" href="install-linux.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> UTAT Space Systems Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rtsys.html">Real-Time Embedded Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="avr-toolchain.html">The AVR Toolchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-mac.html">Software Installation - macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-win.html">Software Installation - Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-linux.html">Software Installation - Linux</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The ATMega32M1 Microcontroller</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pin-layout">Pin Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spi-pins">SPI Pins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#can-pins">CAN Pins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hello-world.html">Hello World ATMega32M1</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-and-github.html">Git and Github</a></li>
</ul>
<p class="caption"><span class="caption-text">Software and Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software-and-programming.html">Software and Programming</a></li>
</ul>
<p class="caption"><span class="caption-text">Electronics and Altium</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../electronics-and-altium.html">Electronics and Altium</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UTAT Space Systems Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>The ATMega32M1 Microcontroller</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/getting-started/atmega32m1.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-atmega32m1-microcontroller">
<span id="the-atmega32m1-microcontroller"></span><h1>The ATMega32M1 Microcontroller<a class="headerlink" href="#the-atmega32m1-microcontroller" title="Permalink to this headline">¶</a></h1>
<p>The ATmega32M1 microcontroller used in Heron Mk II SSMs is a part of a family of
MCUs called the Atmel AVR family, produced by Atmel corporation (now owned by
Microchip Inc.). All the MCUs in the AVR family have a similar architecture and
instruction set.</p>
<p>The 32M1 has an 8-bit architecture. This means most registers are 8 bits wide,
and the data bus is 8 bits wide. Because some registers are 16 bits wide, they
must be accessed using special atomic instructions.</p>
<p>In practice, you won’t often need to worry about the underlying details of the
instruction set or architecture; you can simply write code in C and be confident
<code class="docutils literal"><span class="pre">avr-gcc</span></code> will generate the correct instructions for you.</p>
<div class="section" id="pin-layout">
<span id="pin-layout"></span><h2>Pin Layout<a class="headerlink" href="#pin-layout" title="Permalink to this headline">¶</a></h2>
<p>The 32M1 has 32 pins, labelled from 1 to 32. Most pins have some specific
functionality; for example, pin 4 is VCC, the supply voltage. Instead of
referring to pins by their numeric label, you can also specify a pin using its
mnemonic label; pin 8 is also labelled pin PB0, and read “port B zero”.</p>
<p>There is no simple rule matching a pin’s number to its mnemonic label; see the
32M1 <a class="reference external" href="https://www.microchip.com/wwwproducts/en/ATmega32M1">datasheet</a> for more
details.</p>
<p>If a pin is associated to a port, it can be read and written to using software
instructions. We will examine this more closely later.</p>
<p>Every pin associated to a port has two key properties: its data direction, and
its value. A pin’s data direction is either input (0) or output (1). A pin’s
value is either low (0) or high (1).</p>
<p>We describe two families of pins which will be referenced many times throughout
these docs. Knowing where these pins are and how to measure the voltage across
them can also be useful for debugging purposes.</p>
<p>In what follows we use mnemonic labels because this is how pins are specified in
C code.</p>
</div>
<div class="section" id="spi-pins">
<span id="spi-pins"></span><h2>SPI Pins<a class="headerlink" href="#spi-pins" title="Permalink to this headline">¶</a></h2>
<p>See the Communication Protocols section for how the SPI protocol works.</p>
<ul class="simple">
<li><strong>PB7 - SCK/SCLK</strong> - The 32M1 outputs the clock signal to this pin to synchronize all devices.</li>
<li><strong>PB0 - MISO</strong> - Peripherals (other devices) write to this pin to send data to the 32M1.</li>
<li><strong>PB1 - MOSI</strong> - The 32M1 writes to this pin to send data to a peripheral device.</li>
<li><strong>PD3 - CS/SS</strong> - This pin can be used by another peripheral to select the 32M1 as a slave.</li>
</ul>
<p>In the current setup, the CS/SS pin is not used because each SSM is the master in the
SPI master/slave model. It is included for completeness, and because it can be
the source of many difficult-to-debug bugs. For example, accidentally setting
this pin as an input pin and driving it high can cause the 32M1 to believe it is
now a SPI slave, thus changing the MOSI and clock SPI pins to input pins.</p>
</div>
<div class="section" id="can-pins">
<span id="can-pins"></span><h2>CAN Pins<a class="headerlink" href="#can-pins" title="Permalink to this headline">¶</a></h2>
<p>See the Communication Protocols section for how the CAN protocol works.</p>
<p>These pins connect the 32M1 to the CAN transceiver, which is the device that actually transmits and receives messages on the CAN bus.</p>
<ul class="simple">
<li><strong>PC2 - TX</strong> - Transmit</li>
<li><strong>PC3 - RX</strong> - Receive</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hello-world.html" class="btn btn-neutral float-right" title="Hello World ATMega32M1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install-linux.html" class="btn btn-neutral" title="Software Installation - Linux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, University of Toronto Aerospace Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>