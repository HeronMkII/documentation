
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MOb Allocation &#8212; utatss-documentation 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mob-allocation">
<span id="mob-allocation"></span><h1>MOb Allocation<a class="headerlink" href="#mob-allocation" title="Permalink to this headline">Â¶</a></h1>
<p>The limited number of CAN Message Objects that can be created on the ATmega32M1 (only 6) requires us to strictly allocate the purpose of each MOb. The allocation is done under the following assumptions:</p>
<ul class="simple">
<li>No MOb shall be reinitialized or renamed</li>
<li>Only three subsystem microcontrollers are used, referred to as OBC, EPS and PAY</li>
<li>EPS and PAY do not communicate with each other</li>
<li>A message cannot have multiple recipients, but multiple senders can send to the same MOb</li>
<li>No two MObs on the bus can have the same ID</li>
</ul>
<p>The MOb names are with respect to the OBC (e.g. STATUS{% raw %}_{% endraw %}TX is transmitted from the OBC, STATUS_RX is received on the OBC).</p>
<p>| # | Name | OBC (00) | EPS (10) | PAY (01) |
| :â€” | :â€” | :â€” | :â€” | :â€” |
| 0 | <code class="docutils literal notranslate"><span class="pre">STATUS_Tx_MOb</span></code> | Tx | Rx | Rx |
| 1 | <code class="docutils literal notranslate"><span class="pre">STATUS_Rx_MOb</span></code> | Rx | Tx | Tx |
| 2 | <code class="docutils literal notranslate"><span class="pre">CMD_Rx_MOb</span></code> | Rx | Tx | Tx || 3 | <code class="docutils literal notranslate"><span class="pre">PAY_CMD_Tx_MOb</span></code> | Tx | N/A | Rx || 4 | <code class="docutils literal notranslate"><span class="pre">EPS_CMD_Tx_MOb</span></code> | Tx | Rx | N/A || 5 | <code class="docutils literal notranslate"><span class="pre">DATA_Rx_MOb</span></code>| Rx | Tx | Tx |</p>
<p>The Message ID of every message is structured as the following:</p>
<p>| Bit | 10-9 | 8-3 | 2-1 | 0 |
| :â€” | :â€” | :â€” | :â€” | :â€”
| | Receiver ID | <code class="docutils literal notranslate"><span class="pre">_BV(MOb</span> <span class="pre">#)</span></code> | Sender ID | Rx/TÌ…Ì…x |</p>
<p>The Receiver and Sender ID are 00 for OBC, 01 for PAY, and 10 for EPS.</p>
<p>Bits 8-3 are used to encode the universal MOb number, 0-5, in one-hot encoding. For those unfamiliar with the _BV macro, it simply means <code class="docutils literal notranslate"><span class="pre">000000001</span> <span class="pre">&lt;&lt;</span> <span class="pre">MOb</span> <span class="pre">#</span></code>. So, if MOb # is 5, the value of bits 2-7 would be 100000, and for MOb # = 2 it would be 000100.</p>
<p>Finally, bit 0 is 0 if it as Tx mailbox, 1 if it is an Rx mailbox.</p>
<p>This allows a single universal mask to be valid for all mailboxes:
<code class="docutils literal notranslate"><span class="pre">MOb_Mask</span> <span class="pre">=</span> <span class="pre">111</span> <span class="pre">1111</span> <span class="pre">1000</span></code>
This allows selectivity in Receiver ID and MOb #, while remaining sender-agnostic.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/communication-protocols/can-mob-allocation.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, University of Toronto Aerospace Team [D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[D[C[D[D[D[D[D[D[D[D[D[D[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C): University of Toronto Aerospace Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/communication-protocols/can-mob-allocation.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>